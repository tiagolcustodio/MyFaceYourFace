{% extends "base.html" %}
{% block content %}

<h2>Messages</h2>

{% if inbox|length == 0 %}
  <div class="muted">No messages yet.</div>
{% else %}
  <div class="wall">
    {% for m in inbox %}
      <div class="wall-item">
        <div class="wall-left">
          <a href="{{ url_for('user_profile', username=m.from_username) }}" class="avatar-link">
            {% if m.from_pic %}
              <img class="wall-avatar-img" src="{{ url_for('static', filename=m.from_pic) }}" alt="Sender">
            {% else %}
              <div class="wall-avatar"></div>
            {% endif %}
            <div class="wall-name">{{ m.from_name }}</div>
          </a>
          <div class="muted" style="margin-top:6px;">{{ m.created_at|fmt_dt }}</div>
        </div>

        <div class="wall-right">
          <div class="wall-bubble-row">
            <div class="wall-bubble">{{ m.content }}</div>

            <form method="post"
                  action="{{ url_for('delete_profile_message', message_id=m.id) }}"
                  onsubmit="return confirm('Delete this message?');"
                  class="delete-form">
              <input type="hidden" name="redirect_to" value="{{ request.full_path }}">
              <button type="submit" class="icon-delete" aria-label="Delete">X</button>
            </form>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endif %}

{% endblock %}
